<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI多Agent工作流平台</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Top Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                    <circle cx="16" cy="16" r="16" fill="#3B82F6"/>
                    <path d="M10 12h12M10 16h12M10 20h8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span class="logo-text">AI工作流</span>
            </div>
            
            <div class="nav-menu">
                <a href="#how-it-works" class="nav-link">工作原理</a>
                <a href="#my-orders" class="nav-link">我的订单</a>
                <div class="language-toggle">
                    <button class="lang-btn active" data-lang="zh">中</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>
                <button class="theme-toggle" id="themeToggle">
                    <svg class="theme-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 2L13.09 8.26L20 9L14 14.74L15.18 21.02L10 17.77L4.82 21.02L6 14.74L0 9L6.91 8.26L10 2Z"/>
                    </svg>
                </button>
                <button class="settings-toggle" id="settingsToggle">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                        <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-container">
            <h1 class="hero-title">智能化多Agent协作平台</h1>
            <p class="hero-subtitle">从需求澄清到成果交付，AI Agent自动化工作流让您的项目更高效</p>
            <button class="cta-button" id="startProject">
                <span>开始项目</span>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"/>
                </svg>
            </button>
        </div>
    </section>

    <!-- Main Content Area -->
    <main class="main-content">
        <div class="content-container">
            <!-- Left Panel - Chat -->
            <div class="panel chat-panel">
                <div class="panel-header">
                    <h3>需求对话</h3>
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>在线</span>
                    </div>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot-message">
                            <div class="message-avatar">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17H7.83L10.5 2.5L9 1L3 7V9H21ZM12 8C13.1 8 14 8.9 14 10V22H10V10C10 8.9 10.9 8 12 8Z"/>
                                </svg>
                            </div>
                            <div class="message-content">
                                <p>您好！我是AI助手，可以帮您澄清项目需求。请告诉我您需要什么服务？</p>
                                <span class="message-time">刚刚</span>
                            </div>
                        </div>
                        
                        <div class="message user-message">
                            <div class="message-content">
                                <p>我需要将一些图片转换成文字，然后生成语音文件</p>
                                <span class="message-time">刚刚</span>
                            </div>
                            <div class="message-avatar">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z"/>
                                </svg>
                            </div>
                        </div>
                        
                        <div class="message bot-message">
                            <div class="message-avatar">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17H7.83L10.5 2.5L9 1L3 7V9H21ZM12 8C13.1 8 14 8.9 14 10V22H10V10C10 8.9 10.9 8 12 8Z"/>
                                </svg>
                            </div>
                            <div class="message-content">
                                <p>明白了！我们有专门的Agent来处理：<br>
                                • Agent A: 图片OCR识别转文字<br>
                                • Agent B: 文字转语音合成<br><br>
                                请上传您的图片文件，我会为您生成详细报价。</p>
                                <span class="message-time">刚刚</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="typing-indicator" id="typingIndicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <span>AI正在输入...</span>
                    </div>
                    
                    <div class="file-upload-area" id="fileUpload">
                        <div class="upload-content">
                            <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H26l-4-4H14a2 2 0 0 0 0 0z"/>
                            </svg>
                            <p>拖拽文件到此处或<span class="upload-link">点击上传</span></p>
                            <small>支持 JPG, PNG, PDF 格式，最大 10MB</small>
                        </div>
                        <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.png,.pdf" hidden>
                    </div>
                    
                    <div class="chat-input">
                        <input type="text" id="messageInput" placeholder="输入您的消息..." />
                        <button id="sendMessage" class="send-button">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Middle Panel - Quote & Payment -->
            <div class="panel quote-panel">
                <div class="panel-header">
                    <h3>报价与支付</h3>
                    <div class="quote-status">
                        <span class="status-badge pending">待确认</span>
                    </div>
                </div>
                
                <div class="quote-container">
                    <div class="quote-table">
                        <div class="quote-header">
                            <div class="col-service">服务项目</div>
                            <div class="col-agent">执行Agent</div>
                            <div class="col-time">预计时间</div>
                            <div class="col-price">价格</div>
                        </div>
                        
                        <div class="quote-row">
                            <div class="col-service">
                                <div class="service-info">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"/>
                                    </svg>
                                    <span>图片文字识别</span>
                                </div>
                            </div>
                            <div class="col-agent">
                                <span class="agent-tag">Agent A</span>
                            </div>
                            <div class="col-time">5-10分钟</div>
                            <div class="col-price">$12.00</div>
                        </div>
                        
                        <div class="quote-row">
                            <div class="col-service">
                                <div class="service-info">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.369 4.369 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"/>
                                    </svg>
                                    <span>文字转语音</span>
                                </div>
                            </div>
                            <div class="col-agent">
                                <span class="agent-tag">Agent B</span>
                            </div>
                            <div class="col-time">3-5分钟</div>
                            <div class="col-price">$8.00</div>
                        </div>
                    </div>
                    
                    <div class="quote-summary">
                        <div class="summary-row">
                            <span>小计</span>
                            <span>$20.00</span>
                        </div>
                        <div class="summary-row">
                            <span>平台费 (5%)</span>
                            <span>$1.00</span>
                        </div>
                        <div class="summary-row total">
                            <span>总计</span>
                            <span>$21.00</span>
                        </div>
                    </div>
                    
                    <div class="escrow-info">
                        <div class="escrow-header">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10 2L3 7v11c0 5.55 3.84 7.74 9 9 5.16-1.26 9-3.45 9-9V7l-7-5z"/>
                            </svg>
                            <span>智能合约托管</span>
                            <div class="escrow-status">
                                <span class="status-badge pending">待支付</span>
                            </div>
                        </div>
                        <p class="escrow-description">
                            资金将托管在 CrossMe 智能合约中，按里程碑自动释放
                        </p>
                        <div class="contract-address">
                            <small>合约地址: 0x742d35Cc6634C0532925a3b8D20Fc6d36</small>
                        </div>
                    </div>
                    
                    <button class="payment-button" id="paymentButton">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"/>
                        </svg>
                        立即支付 $21.00
                    </button>
                </div>
            </div>

            <!-- Right Panel - Progress Timeline -->
            <div class="panel progress-panel">
                <div class="panel-header">
                    <h3>执行进度</h3>
                    <div class="progress-info">
                        <span>2/6 完成</span>
                    </div>
                </div>
                
                <div class="timeline">
                    <div class="timeline-item completed">
                        <div class="timeline-marker">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                            </svg>
                        </div>
                        <div class="timeline-content">
                            <h4>需求澄清</h4>
                            <p>对话完成，需求明确</p>
                            <div class="timeline-progress">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <span class="timeline-percentage">100%</span>
                        </div>
                    </div>
                    
                    <div class="timeline-item completed">
                        <div class="timeline-marker">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                            </svg>
                        </div>
                        <div class="timeline-content">
                            <h4>生成报价</h4>
                            <p>任务拆分和成本计算</p>
                            <div class="timeline-progress">
                                <div class="progress-bar" style="width: 100%"></div>
                            </div>
                            <span class="timeline-percentage">100%</span>
                        </div>
                    </div>
                    
                    <div class="timeline-item active">
                        <div class="timeline-marker">
                            <div class="loading-spinner"></div>
                        </div>
                        <div class="timeline-content">
                            <h4>等待支付</h4>
                            <p>智能合约托管确认</p>
                            <div class="timeline-progress">
                                <div class="progress-bar" style="width: 30%"></div>
                            </div>
                            <span class="timeline-percentage">30%</span>
                        </div>
                    </div>
                    
                    <div class="timeline-item pending">
                        <div class="timeline-marker">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"/>
                            </svg>
                        </div>
                        <div class="timeline-content">
                            <h4>Agent A 执行</h4>
                            <p>图片文字识别处理</p>
                            <div class="timeline-progress">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="timeline-percentage">0%</span>
                        </div>
                    </div>
                    
                    <div class="timeline-item pending">
                        <div class="timeline-marker">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.369 4.369 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"/>
                            </svg>
                        </div>
                        <div class="timeline-content">
                            <h4>Agent B 执行</h4>
                            <p>文字转语音合成</p>
                            <div class="timeline-progress">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="timeline-percentage">0%</span>
                        </div>
                    </div>
                    
                    <div class="timeline-item pending">
                        <div class="timeline-marker">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"/>
                            </svg>
                        </div>
                        <div class="timeline-content">
                            <h4>成果打包</h4>
                            <p>最终交付准备</p>
                            <div class="timeline-progress">
                                <div class="progress-bar" style="width: 0%"></div>
                            </div>
                            <span class="timeline-percentage">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Bottom Section -->
    <footer class="footer">
        <div class="footer-container">
            <div class="download-section">
                <h3>下载中心</h3>
                <p>您的项目完成后，文件将在此处提供下载</p>
                <button class="download-button" disabled>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 13.293a1 1 0 011.414 0L9 14.586V7a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"/>
                    </svg>
                    等待项目完成...
                </button>
            </div>
            
            <div class="transaction-history">
                <h3>交易记录</h3>
                <div class="transaction-list">
                    <div class="transaction-item">
                        <div class="transaction-info">
                            <span class="transaction-type">托管创建</span>
                            <span class="transaction-time">等待支付</span>
                        </div>
                        <span class="transaction-amount">$21.00</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>AI模型设置</h3>
                <button class="modal-close" id="closeSettings">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 6l12 12M6 18L18 6"/>
                    </svg>
                </button>
            </div>
            
            <div class="modal-body">
                <div class="setting-group">
                    <label for="llmProvider">AI服务提供商</label>
                    <select id="llmProvider" class="setting-select">
                        <option value="mock">本地模拟（免费测试）</option>
                        <option value="openai">OpenAI GPT</option>
                        <option value="deepseek">DeepSeek</option>
                        <option value="qianwen">通义千问</option>
                        <option value="ollama">Ollama本地</option>
                    </select>
                    <small class="setting-hint">选择您要使用的AI模型服务</small>
                </div>
                
                <div class="setting-group" id="apiKeyGroup" style="display: none;">
                    <label for="apiKey">API密钥</label>
                    <div class="input-group">
                        <input type="password" id="apiKey" class="setting-input" placeholder="请输入您的API密钥">
                        <button type="button" id="toggleApiKey" class="input-toggle">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
                                <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
                                <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.708zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
                            </svg>
                        </button>
                    </div>
                    <small class="setting-hint">API密钥将安全存储在本地浏览器中</small>
                </div>
                
                <div class="setting-group">
                    <label>连接状态</label>
                    <div class="connection-status" id="connectionStatus">
                        <div class="status-indicator">
                            <div class="status-dot"></div>
                            <span>未连接</span>
                        </div>
                        <button type="button" id="testConnection" class="test-btn">测试连接</button>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>使用说明</label>
                    <div class="provider-info" id="providerInfo">
                        <p>选择AI服务提供商查看详细说明</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" id="saveSettings" class="btn-primary">保存设置</button>
                <button type="button" id="cancelSettings" class="btn-secondary">取消</button>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="llm-api.js"></script>
    <script src="script.js"></script>
</body>
</html>
